{"is_source_file": true, "format": "JavaScript", "description": "React custom hook for admin functionalities in a KYC application, including fetching submissions, filtering, approval, rejection, requesting info, and audit logging.", "external_files": ["../supabase/client", "./useAuth"], "external_methods": ["getSupabaseClient", "useAuth", "useCallback", "useEffect", "useMemo", "useRef", "useState"], "published": ["useAdmin"], "classes": [], "methods": [{"name": "_applyFilters(query)", "description": "Builds the query filters based on current filter state for Supabase queries.", "scope": "useAdmin", "scopeKind": "function"}, {"name": "fetchSubmissions", "description": "Fetches list of KYC submissions with applied filters, pagination, and error handling."}, {"name": "fetchSubmissionById", "description": "Retrieves a single KYC submission by its ID for review."}, {"name": "writeAuditLog(submissionId, action, notes)", "description": "Writes an audit log entry for actions performed on submissions.", "scope": "useAdmin", "scopeKind": "function"}, {"name": "approveSubmission", "description": "Approves a submission and logs the action."}, {"name": "rejectSubmission", "description": "Rejects a submission and logs the action."}, {"name": "requestMoreInfo", "description": "Requests additional information for a submission and logs the action."}, {"name": "setStatusFilter", "description": "Sets the filter for submission status."}, {"name": "setDocTypeFilter", "description": "Sets the filter for document type."}, {"name": "setSearchFilter", "description": "Sets the search filter for submissions."}, {"name": "useAdmin()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getSupabaseClient", "useAuth", "supabase.from", "supabase.select", "supabase.eq", "supabase.or", "supabase.range", "supabase.update", "supabase.insert"], "search-terms": ["useAdmin", "KYC submissions", "admin hook", "audit logs", "submissions filtering", "approve submission", "reject submission", "request info", "supabase", "RLS policies"], "state": 2, "file_id": 31, "knowledge_revision": 76, "git_revision": "", "ctags": [{"_type": "tag", "name": "_applyFilters", "path": "/home/kavia/workspace/code-generation/ekyc-42420-42460/EKYCWebApplication/src/hooks/useAdmin.js", "pattern": "/^  function _applyFilters(query) {$/", "language": "JavaScript", "kind": "function", "signature": "(query)", "scope": "useAdmin", "scopeKind": "function"}, {"_type": "tag", "name": "action", "path": "/home/kavia/workspace/code-generation/ekyc-42420-42460/EKYCWebApplication/src/hooks/useAdmin.js", "pattern": "/^      action, \\/\\/ 'approved' | 'rejected' | 'request_info'$/", "language": "JavaScript", "kind": "field", "scope": "useAdmin.writeAuditLog.payload", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/ekyc-42420-42460/EKYCWebApplication/src/hooks/useAdmin.js", "pattern": "/^    const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "useAdmin.writeAuditLog", "scopeKind": "class"}, {"_type": "tag", "name": "submission_id", "path": "/home/kavia/workspace/code-generation/ekyc-42420-42460/EKYCWebApplication/src/hooks/useAdmin.js", "pattern": "/^      submission_id: submissionId,$/", "language": "JavaScript", "kind": "property", "scope": "useAdmin.writeAuditLog.payload", "scopeKind": "class"}, {"_type": "tag", "name": "useAdmin", "path": "/home/kavia/workspace/code-generation/ekyc-42420-42460/EKYCWebApplication/src/hooks/useAdmin.js", "pattern": "/^export default function useAdmin() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "writeAuditLog", "path": "/home/kavia/workspace/code-generation/ekyc-42420-42460/EKYCWebApplication/src/hooks/useAdmin.js", "pattern": "/^  async function writeAuditLog(submissionId, action, notes) {$/", "language": "JavaScript", "kind": "function", "signature": "(submissionId, action, notes)", "scope": "useAdmin", "scopeKind": "function"}], "hash": "9ae3e361466e966b15cb5f15aa039230", "format-version": 4, "code-base-name": "EKYCWebApplication", "filename": "EKYCWebApplication/src/hooks/useAdmin.js", "fields": [{"name": "action, \\/\\/ 'approved' | 'rejected' | 'request_info'", "scope": "useAdmin.writeAuditLog.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "submission_id: submissionId,", "scope": "useAdmin.writeAuditLog.payload", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"76": ""}]}